# check_java_version.yml
---
- name: Check Java version on staging server
  hosts: staging

  tasks:
    - name: Check Java version
      shell: java -version 2>&1 | head -n 1
      register: java_version_output
      ignore_errors: true  # Ignore errors in case Java is not installed
      delegate_to: "{{ inventory_hostname }}"

    - name: Display Java version
      debug:
        msg: "Java version on {{ inventory_hostname }}: {{ java_version_output.stdout }}"
      when: java_version_output.rc == 0  # Print only if the command was successful
